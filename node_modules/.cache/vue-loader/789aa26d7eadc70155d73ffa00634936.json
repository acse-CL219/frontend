{"remainingRequest":"/Users/liuzhaolun/WebstormProjects/Tencent/website/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuzhaolun/WebstormProjects/Tencent/website/src/views/Data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuzhaolun/WebstormProjects/Tencent/website/src/views/Data.vue","mtime":1576552647000},{"path":"/Users/liuzhaolun/WebstormProjects/Tencent/website/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuzhaolun/WebstormProjects/Tencent/website/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuzhaolun/WebstormProjects/Tencent/website/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuzhaolun/WebstormProjects/Tencent/website/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgYXBpUGFyc2UsCiAgYXBpVHJ1bmNhdGUsCiAgYXBpRmlsZXMsCiAgYXBpRGVsZXRlLAogIGFwaVVwbG9hZGVkCn0gZnJvbSAiLi4vYXBpL2RhdGFBcGkuanMiOwoKaW1wb3J0IHsgTG9hZGluZyB9IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgeyBhcnJheUZpbGwgLGVycm9yRGlhbG9nIH0gZnJvbSAiLi4vdXRpbHMvdG9vbHMuanMiOwppbXBvcnQge2FwaUxvZ291dCxhcGlVc2VySW5mbyxhcGlVc2VyY2hhbmdlfSBmcm9tICcuLi9hcGkvYXBpLmpzJwppbXBvcnQge3N0b3JlfSBmcm9tICcuLi9zdG9yZS5qcycKaW1wb3J0IHsgY29sbGVnZSB9IGZyb20gJy4uL2FwaS90ZXN0ZGF0YSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgLy8g57uE5Lu25ZCN56ewLOWcqOiwg+ivleaXtuacieeUqAogIG5hbWU6ICJkYXRhbWFuYWdlIiwKCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWxlY3RDb2xsZWdlOiIiLAogICAgICAKICAgICAgcmVnOnsKICAgICAgICAgcGFzc3dvcmQxOiIiLAogICAgICAgICBwYXNzd29yZDI6IiIsCiAgICAgICAgIHBhc3N3b3JkMzoiIiwKICAgICAgfSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHN0b3JlU3RhdGU6c3RvcmUuc3RhdGUsCiAgICAgIC8vIOaOpeWPozLnmoQg55So5p2l5ZKM6YCJ5oup5qGGCiAgICAgIHVwbG9hZDogewogICAgICAgIC8vIOi/meS4qumAieaLqeWQjuWPmOaIkERhdGXlr7nosaEKICAgICAgICB5ZWFyOiAiIiwKICAgICAgICBncmFkZTogIiIsCiAgICAgICAgdGVybTogIiIsCiAgICAgICAgY29sbGVnZToi5aSn5pWw5o2u5LiO5Lq65bel5pm66IO95a2m6ZmiIgogICAgICB9LAogICAgICAvLyDkuIrkvKDmlofku7bml7bpmYTluKbnmoTmlbDmja4s54K55Ye75LiK5Lyg5ZCO5qC55o2udXBsb2Fk5a+56LGh6YeM55qE5ZCE5Liq5YC86K6+572udXBsb2FkRGF0YeeahOWGheWuueWGjeaPkOS6pAogICAgICB1cGxvYWREYXRhOiB7fSwKICAgICAgLy8g5bey5LiK5Lyg55qE5pWw5o2u5YiX6KGoCgogICAgICB1cGxvYWRlZDogW10sCiAgICAgIC8vIOaOpeWPozEKICAgICAgLy8g5b2T5YmN6YCJ5oup55qE5pel5pyf77yM6buY6K6k6YCJ5oupMjAxOeW5tOW6pueahAogICAgICB5ZWFyOiBuZXcgRGF0ZSgyMDE5LCAxMSwgMTEpLAogICAgICAvLyDmsqHmlbDmja7ml7bmmL7npLrnmoTmtYvor5UKICAgICAgZmlsZXM6IFsKICAgICAgICB7CiAgICAgICAgICBjb2xsZWdlOiAi5rWL6K+VIiwKICAgICAgICAgIHllYXI6ICIyMDE4IgogICAgICAgIH0KICAgICAgXQogICAgICAKICAgIH07CiAgfSwKCiAgLy8g57uE5Lu2Y3JlYXRlZOaXtuivt+axgjIwMTnnmoTmlbDmja4KICBjcmVhdGVkKCkgewogICAgICAgICAgIGNvbnNvbGUubG9nKCLnu4Tku7bliJvlu7ouLi4iKQogICAgLy8g6K+35rGC55So5oi35L+h5oGvCiAgICBhcGlVc2VySW5mbygpLnRoZW4ocmVzPT57CiAgICAgIGNvbnNvbGUubG9nKCLojrflj5bnlKjmiLfnmbvlvZXkv6Hmga8uLi4iKQogICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAvLyAg6K6+572u55So5oi35L+h5oGvCiAgICBjb25zb2xlLmxvZygi6K6+572u55So5oi35ZCNOiIrcmVzLmRhdGEudXNlcm5hbWUpCiAgICBzdG9yZS5zZXRVc2VyTmFtZShyZXMuZGF0YS51c2VybmFtZSk7CiAgICB9KS5jYXRjaChlcnI9PnsKICAgICAgY29uc29sZS5sb2coIuiOt+WPlueUqOaIt+S/oeaBr+WHuumUmToiKQogICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICB9KQogICAgLy8g6K+35rGC5Lik5Liq5o6l5Y+j55qE5pWw5o2uCiAgICB0aGlzLnN3aXRjaFllYXIoMjAxOSk7CiAgICB0aGlzLnJlcXVlc3RVcGxvYWQoKTsKIAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOmAieaLqeafkOS4quW5tOW6puWQju+8jOWtpuacn+S5n+aYr+ehruWumueahCwyMDE35bm05bqm5Y+q5pyJ5LiJ5Liq5a2m5pyfIDE357qnMTbnuqcxNee6pwogICAgdXBsb2FkWWVhcnMoKSB7CiAgICAgIGlmICh0aGlzLnVwbG9hZC55ZWFyID09PSAiIikgcmV0dXJuIFtdOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnVwbG9hZC55ZWFyICsgdHlwZW9mIHRoaXMudXBsb2FkLnllYXIpOwogICAgICBsZXQgeWVhciA9IHRoaXMudXBsb2FkLnllYXIuZ2V0RnVsbFllYXIoKTsKICAgICAgbGV0IHJlc3VsdCA9IFtdOwogICAgICBmb3IgKGxldCBqID0geWVhcjsgaiA+IHllYXIgLSAzOyBqIC09IDEpIHsKICAgICAgICByZXN1bHQucHVzaCh7CiAgICAgICAgICBsYWJlbDogaiArICLnuqciLAogICAgICAgICAgdmFsdWU6IGogKyAiIgogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb3BlbkNvbGxlZ2UodmFsdWUpCiAgICB7CiAgICAgIGNvbnNvbGUubG9nKCLmiZPlvIDlrabpmaI6Iix2YWx1ZSkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ImNvbGxlZ2UiLAogICAgICAgIHBhcmFtczp7CiAgICAgICAgICBjb2xsZWdlaWQ6dmFsdWUKICAgICAgICB9CiAgICAgICAgCgogICAgICB9KQogICAgfSwKICAgIHFpYW5kYW8oKXsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZToi562+5Yiw5oiQ5YqfLOmHkeW4gSsxMCIsCiAgICAgICAgdHlwZToid2FybmluZyIKICAgICAgfSkKICAgIH0sCiAgICAKICAgIGNoYW5nZ2coKXsKICAgICAgaWYodGhpcy5yZWcucGFzc3dvcmQyIT10aGlzLnJlZy5wYXNzd29yZDMpewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+WvhueggeS4jeS4gOiHtCcsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlPWZhbHNlCiAgICAgIGNvbnNvbGUubG9nKCLosIPnlKjnm5HlkKzkv67mlLnlr4bnoIEiKQogICAgICBhcGlVc2VyY2hhbmdlKHsKICAgICAgICAgIHVzZXJuYW1lOnRoaXMuc3RvcmVTdGF0ZS5sb2dpbi51c2VybmFtZSwKICAgICAgICAgIG9sZF9wYXNzd29yZDp0aGlzLnJlZy5wYXNzd29yZDEsCiAgICAgICAgICBwYXNzd29yZDp0aGlzLnJlZy5wYXNzd29yZDIsCiAgICAgICAgICBwYXNzd29yZDI6dGhpcy5yZWcucGFzc3dvcmQzLAogICAgICB9KS50aGVuKHJlcz0+ewogICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKCLor7fmsYLmiJDlip8uLiIpCiAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgIGlmKHJlcy5jb2RlPT0wKQogICAgICAgIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHkv67mlLnmiJDlip8s6Lez6L2s5Yiw55m75b2V55WM6Z2iJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6J2xvZ2luJwogICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICflr4bnoIHlpLHotKU6JytyZXMubXNnLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChlcnI9PnsKICAgICAgICBjb25zb2xlLmxvZygi6K+35rGC5aSx6LSlLiIpCiAgICAgIH0pCiAgICB9LAogICAgICBoYW5kbGVDbG9zZShkb25lKSB7CiAgICAgICAgdGhpcy4kY29uZmlybSgn56Gu6K6k5YWz6Zet77yfJykKICAgICAgICAgIC50aGVuKF8gPT4gewogICAgICAgICAgICBkb25lKCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKF8gPT4ge30pOwogICAgICB9CiAgICAsCiAgICBsb2dvdXQoKXsKICAgICAgYXBpTG9nb3V0KCkudGhlbihyZXM9PnsKICAgICAgICBpZihyZXMuY29kZT09MCl7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiLnmbvlh7rmiJDlip8hIgogICAgICAgIH0pCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTonbG9naW4nCgogICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIGVsc2V7CiAgICAgICAgICAgIGVycm9yRGlhbG9nKHRoaXMscmVzLm1zZykKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycj0+e30pCgogICAgfSwKICAgIC8vIOaOpeWPozEg5o+Q5Lqk5pWw5o2uCiAgICBzdWJtaXRVcGxvYWROZXcoKSB7CiAgICAgIGNvbnNvbGUubG9nKCLkuIrkvKDmlbDmja4uLi4iKTsKICAgICAgaWYodGhpcy51cGxvYWQueWVhcj09IiIpewogICAgICAgIHRoaXMuJG1lc3NhZ2UoIuW5tOW6puayoeaciemAieaLqSEhIikKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICAvLyDorr7nva7pmYTliqDlj4LmlbAKICAgICAgdGhpcy51cGxvYWREYXRhWyJ5ZWFyIl0gPSB0aGlzLnVwbG9hZC55ZWFyLmdldEZ1bGxZZWFyKCk7CiAgICAgIHRoaXMudXBsb2FkRGF0YVsiZ3JhZGUiXSA9IHRoaXMudXBsb2FkLmdyYWRlOwogICAgICB0aGlzLnVwbG9hZERhdGFbInRlcm0iXSA9IHRoaXMudXBsb2FkLnRlcm07CiAgICAgIHRoaXMudXBsb2FkRGF0YVsiY29sbGVnZSJdID0gdGhpcy51cGxvYWQuY29sbGVnZTsKICAgICAgdGhpcy4kcmVmcy51cGxvYWROZXcuc3VibWl0KCk7CiAgICB9LAogICAgLy8g6I635Y+W5bey5LiK5Lyg5pWw5o2uCiAgICByZXF1ZXN0VXBsb2FkKCkgewogICAgICBhcGlVcGxvYWRlZCgpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCLojrflj5blt7LkuIrkvKDnmoTmlbDmja46Iik7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgaWYocmVzLmNvZGU9PTApCiAgICAgICAgICBhcnJheUZpbGwodGhpcy51cGxvYWRlZCwgcmVzLmRhdGEpOwogICAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy4kYWxlcnQocmVzLmRhdGEsIuWksei0pSIsewogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDoi56Gu5a6aIgogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIuiOt+WPluW3suS4iuS8oOeahOaVsOaNruWksei0pSIpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOagvOW8j+WMluW5tOe6p+i+k+WHuu+8jDIwMTflj6rovpPlh7ogMTfnuqfov5nmoLfnmoQKICAgIGZvcm1hdEdyYWRlKHJvdywgY29sdW1uLCBjZWxsVmFsdWUsIGluZGV4KSB7CiAgICAgIGlmKCFjZWxsVmFsdWUpcmV0dXJuICJudWxsIgogICAgICBpZiAoY2VsbFZhbHVlLmxlbmd0aCA9PSA0KSByZXR1cm4gY2VsbFZhbHVlLnN1YnN0cmluZygyLCA0KSArICLnuqciOwogICAgICBlbHNlIHJldHVybiBjZWxsVmFsdWU7CiAgICB9LAogICAgLy8g5qC85byP5YyW5a2m5pyf6L6T5Ye6CiAgICBmb3JtYXRUZXJtKHJvdyxjb2x1bW4sY2VsbFZhbHVlLGluZGV4KXsKICAgICAgaWYoY2VsbFZhbHVlPT0idGVybTEiKXJldHVybiAi56ys5LiA5a2m5pyfIgogICAgICBlbHNlIGlmKGNlbGxWYWx1ZT09InRlcm0yIilyZXR1cm4gIuesrOS6jOWtpuacnyIKICAgICAgZWxzZQogICAgICByZXR1cm4gY2VsbFZhbHVlCiAgICB9LAogICAgLy8g5qC85byP5YyW54q25oCB56CBLOWwhuaVsOWtl+i9rOaNouaIkOaWh+WtlwogICAgZm9ybWF0U3RhdGUocm93LGNvbHVtbixjZWxsVmFsdWUsaW5kZXgpewogICAgICAgIGlmKGNlbGxWYWx1ZT09MCkKICAgICAgICByZXR1cm4gIuacquS4iuS8oCIKICAgICAgICBlbHNlIGlmKGNlbGxWYWx1ZT09MSkKICAgICAgICByZXR1cm4gIuacquino+aekCIKICAgICAgICBlbHNlIGlmKGNlbGxWYWx1ZT09MikKICAgICAgICByZXR1cm4gIuino+aekOWujOaIkCIKICAgIH0sCiAgICAvLyDmuIXnqbrooajvvIzmtYvor5Xkvb/nlKgKICAgIHRydW5jYXRlRmlsZXMoKSB7CiAgICAgIGFwaVRydW5jYXRlKCkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIua4heepuuihqOaIkOWKny4uIik7CiAgICAgICAgICB0aGlzLnN3aXRjaFllYXIodGhpcy55ZWFyLmdldEZ1bGxZZWFyKCkpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygi5riF56m66KGo5aSx6LSlLi4iKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDmuIXnqbrmlbDmja7vvIzmuIXnqbrmn5DkuKrmlofku7bnmoTmlbDmja7vvIzlubbliKDpmaTmlofku7YKICAgIGRlbGV0ZUZpbGUocGFyYW0pIHsKICAgICAgbGV0IHBvc3RwYXJhbSA9IHsKICAgICAgICAvLyDlrablubQKICAgICAgICB5ZWFyOiBwYXJhbS55ZWFyLAogICAgICAgIC8vIOW5tOe6pwogICAgICAgIGdyYWRlOiBwYXJhbS5ncmFkZSwKICAgICAgICAvLyDlrabmnJ8KICAgICAgICB0ZXJtOiBwYXJhbS50ZXJtLAogICAgICAgIGNvbGxlZ2U6cGFyYW0uY29sbGVnZQogICAgICB9OwogICAgICAgTG9hZGluZy5zZXJ2aWNlKHsgdGV4dDogIuWIoOmZpOaVsOaNruaWh+S7tuWSjOaVsOaNruW6k+mHjOeahOiusOW9lS4uLi4iLCBmdWxsc2NyZWVuOiB0cnVlIH0pOwogICAgICBhcGlEZWxldGUocG9zdHBhcmFtKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgTG9hZGluZy5zZXJ2aWNlKHsgZnVsbHNjcmVlbjogdHJ1ZSB9KS5jbG9zZSgpOwogICAgICAgICAgY29uc29sZS5sb2coImZmZmYiKQogICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAKICAgICAgICAgIGlmKHJlcy5jb2RlPT0wKXsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAic3VjY2VzcyIsIG1lc3NhZ2U6ICLmuIXnqbrmlbDmja7miJDlip86IityZXMubXNnIH0pOwogICAgICAgICAgLy8g5Yig6Zmk5oiQ5Yqf5Yi35paw5pWw5o2uCiAgICAgICAgICB0aGlzLnN3aXRjaFllYXIodGhpcy55ZWFyLmdldEZ1bGxZZWFyKCkpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZQogICAgICAgICAgewogICAgICAgICAgICB0aGlzLiRhbGVydChyZXMubXNnLCAi5Yig6Zmk5pWw5o2u5aSx6LSlIiwgewogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIKICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgTG9hZGluZy5zZXJ2aWNlKHsgZnVsbHNjcmVlbjogdHJ1ZSB9KS5jbG9zZSgpOwogICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgdGhpcy4kYWxlcnQoZXJyLmRhdGEsICLmnI3liqHlmajlk43lupTlpLHotKUs5riF56m65pWw5o2u5aSx6LSlIiwgewogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOino+aekOaWh+S7tixwb3N06Kej5p6Q5pWw5o2u55qE6Lev55SxCiAgICBwYXJzZUZpbGUocGFyYW0pIHsKICAgICAgY29uc29sZS5sb2coIuino+aekOaVsOaNrjoiKTsKICAgICAgY29uc29sZS5sb2cocGFyYW0pOwogICAgICAvLyDml7bpl7TovoPplb/vvIzmmL7npLrlhajlsY/ov5vluqbmnaEKICAgICAgTG9hZGluZy5zZXJ2aWNlKHsgdGV4dDogIuino+aekOaVsOaNruWIsOaVsOaNruW6k+S4rS4uLi4iLCBmdWxsc2NyZWVuOiB0cnVlIH0pOwogICAgICBsZXQgcG9zdHBhcmFtID0gewogICAgICAgIC8vIOWtpuW5tAogICAgICAgIHllYXI6IHBhcmFtLnllYXIsCiAgICAgICAgLy8g5bm057qnCiAgICAgICAgZ3JhZGU6IHBhcmFtLmdyYWRlLAogICAgICAgIC8vIOWtpuacnwogICAgICAgIHRlcm06IHBhcmFtLnRlcm0sCiAgICAgICAgY29sbGVnZTpwYXJhbS5jb2xsZWdlCiAgICAgIH07CiAgICAgIGFwaVBhcnNlKHBvc3RwYXJhbSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgLy8g6K+35rGC5a6M5oiQ77yM5YWz6Zet6L+b5bqm5p2hCiAgICAgICAgICBMb2FkaW5nLnNlcnZpY2UoeyBmdWxsc2NyZWVuOiB0cnVlIH0pLmNsb3NlKCk7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgLy8g6L+U5ZueMjAwLOWGjeWIpOaWremUmeivr+aXoOeggQogICAgICAgICAgaWYgKHJlcy5jb2RlICE9IDApIHsKICAgICAgICAgICAgdGhpcy4kYWxlcnQocmVzLm1zZywgIuacjeWKoeWZqOWTjeW6lOS4iuS8oOWksei0pSIsIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi6Kej5p6Q5oiQ5YqfIiB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc3dpdGNoWWVhcih0aGlzLnllYXIuZ2V0RnVsbFllYXIoKSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgdGhpcy4kYWxlcnQoICLmjZXmjYnliLDlvILluLg6IitlcnIsIuino+aekOmUmeivryIsIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIKICAgICAgICAgICAgfSk7CiAgICAgICAgICBMb2FkaW5nLnNlcnZpY2UoeyBmdWxsc2NyZWVuOiB0cnVlIH0pLmNsb3NlKCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgCiAgICAvLyDkuIrkvKDmiJDlip/lm57osIMKICAgIC8v5o+Q56S65raI5oGvCiAgICB1cGxvYWRPayhyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT0gMCkgewogICAgICAgIHRoaXMuJGFsZXJ0KHJlc3BvbnNlLm1zZywgIuacjeWKoeWZqOWTjeW6lOS4iuS8oOWksei0pSIsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIgogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIuS4iuS8oOaIkOWKnyIKICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLnN3aXRjaFllYXIodGhpcy55ZWFyLmdldEZ1bGxZZWFyKCkpOwogICAgICB0aGlzLiRyZWZzLnVwbG9hZE5ldy5jbGVhckZpbGVzKCk7CiAgICB9LAogICAgLy8g5LiK5Lyg5aSx6LSl5Zue6LCDCiAgICB1cGxvYWROb3RPayhlcnIsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGNvbnNvbGUubG9nKCLkuIrkvKDmlofku7bkuI3miJDlip8uLi4iKTsKICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgdGhpcy4kYWxlcnQoZXJyLCAi5LiK5Lyg5aSx6LSlIiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIgogICAgICB9KTsKICAgICAgdGhpcy4kcmVmcy51cGxvYWROZXcuY2xlYXJGaWxlcygpOwogICAgfSwKICAgIC8vIOaWh+S7tueKtuaAgeaUueWPmOa3u+WKoOaWh+S7tu+8jOS4iuS8oOaIkOWKn++8jOS4iuS8oOWksei0pemDveS8muiwg+eUqO+8jOi/memHjOiuvue9ruS4qumAu+i+ke+8jOS4iuS8oOaIkOWKn+WQjuWwneivleino+aekOaWh+S7tuWQje+8jOiOt+WPluWHuuW5tOW6puW5tOe6p+aVsOaNrgogICAgdXBsb2FkQ2hhbmdlKGZpbGUsZmlsZUxpc3QpewogICAgICBjb25zb2xlLmxvZygi5paH5Lu254q25oCB5pS55Y+YOiIpCiAgICAgIGNvbnNvbGUubG9nKGZpbGUpCiAgICAgIGNvbnNvbGUubG9nKGZpbGVMaXN0KQogICAgICAvLyDlm6DkuLrpg73kvJrop6blj5HvvIzlpoLmnpzplb/luqbmmK8x5bCx5piv77yM5re75Yqg55qE77yM5LiK5Lyg55qEZmlsZUxpc3Tlj5jmiJAwCiAgICAgIGlmKGZpbGVMaXN0Lmxlbmd0aD09MSkKICAgICAgewogICAgICAgIGxldCBuYW1lID0gZmlsZUxpc3RbMF0ubmFtZQogICAgICAgIGNvbnNvbGUubG9nKCLmt7vliqDmlofku7blkI06IituYW1lKQogICAgICAgIC8vIOato+WImeafpeaJvuaWh+S7tuWQjemHjOeahOaVsOaNrgogICAgICAgIGxldCBncmFkZV9wYXR0ZXJuID0vKFxkKynnuqcvZwogICAgICAgIGxldCB0ZXJtX3BhdHRlcm49IC/nrKwoLinlrabmnJ8vZwogICAgICAgIGxldCB5ZWFyX3BhdHRlcm49LyhcZHs0fSktXGR7NH0vZwogICAgICAgIGxldCBncmFkZT1ncmFkZV9wYXR0ZXJuLmV4ZWMobmFtZSkKICAgICAgICBsZXQgdGVybSA9IHRlcm1fcGF0dGVybi5leGVjKG5hbWUpCiAgICAgICAgbGV0IHllYXIgPSB5ZWFyX3BhdHRlcm4uZXhlYyhuYW1lKQogICAgICAgIGNvbnNvbGUubG9nKCLlsJ3or5XlnKjmlofku7blkI3ph4zmn6Xmib7lj4LmlbA6IitncmFkZSkKICAgICAgICBjb25zb2xlLmxvZyh0ZXJtKQogICAgICAgIGNvbnNvbGUubG9nKHllYXIpCiAgICAgICAgLy8g5aaC5p6c5LiJ5Liq6YO95p+l5om+5Yiw5bCx5YiH5o2iCiAgICAgICAgaWYoZ3JhZGUubGVuZ3RoPT0yJiZ0ZXJtLmxlbmd0aD09MiYmeWVhci5sZW5ndGg9PTIpCiAgICAgICAgewogICAgICAgICAgdGVybSA9IHRlcm1bMV0KICAgICAgICAgIGlmKHRlcm09PSLkuIAiKXRlcm09InRlcm0xIgogICAgICAgICAgZWxzZSBpZih0ZXJtPT0i5LqMIil0ZXJtPSJ0ZXJtMiIKICAgICAgICAgIGdyYWRlPWdyYWRlWzFdCiAgICAgICAgICB5ZWFyID0geWVhclsxXQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6InN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOmDmlofku7blkI3ph4zojrflj5blubTluqbnrYnmlbDmja7miJDlip8s5bm05bqmOiR7eWVhcn0g5bm057qnOiR7Z3JhZGV9IOWtpuacnzoke3Rlcm19YAogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMudXBsb2FkLmdyYWRlPWdyYWRlCiAgICAgICAgICB0aGlzLnVwbG9hZC50ZXJtID0gdGVybQogICAgICAgICAgdGhpcy51cGxvYWQueWVhciA9IG5ldyBEYXRlKHllYXIsMSwxKQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ImVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZToi5paH5Lu25ZCN6YeM6I635Y+W5bm05bqm562J5pWw5o2u5aSx6LSl77yM6K+35omL5Yqo6YCJ5oupIgogICAgICAgICAgfSkKICAgICAgICB9CgogICAgICB9CiAgICB9LAogICAgLy8g5o6l5Y+jMS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8vIOiOt+WPlnBvc3Tml7bpobrkvr/kuIrkvKDkuIrljrvnmoTmlbDmja7vvIzkuIrkvKDvvIxlbC11cGxvYWTnlKjliLDvvIzov5nph4zmj5DkuqTov4fljrvnmoTmmK/ooajljZXlvaLlvI/nmoQKICAgIGdldFVwbG9hZFBvc3REYXRhKHJvdykgewogICAgICByZXR1cm4gewogICAgICAgIHllYXI6IHJvdy55ZWFyLAogICAgICAgIGdyYWRlOiByb3cuZ3JhZGUsCiAgICAgICAgdGVybTogcm93LnRlcm0KICAgICAgfTsKICAgIH0sCiAgICAvLyDooYznmoTmoLflvI/vvIzmoLnmja7nirbmgIHnoIHnmoTkuI3lkIzmmL7npLrkuI3lkIznmoTog4zmma/popzoibIKICAgIGZpbGVTdGF0ZUNsYXNzTmFtZShyb3csIHJvd0luZGV4KSB7CiAgICAgIGlmIChyb3cucm93LnN0YXRlID09IDApIHJldHVybiAiZmlsZS1uby11cGxvYWQiOwogICAgICBlbHNlIGlmIChyb3cucm93LnN0YXRlID09IDEpIHsKICAgICAgICByZXR1cm4gImZpbGUtb2siOwogICAgICB9CiAgICB9LAogICAgLy8g5pS55Y+Y6YCJ5oup5bm05bqm5pe2LOmHjeaWsOivt+axguaVsOaNrgogICAgY2hhbmdlWWVhcihkYXRlKSB7CiAgICAgIHRoaXMuc3dpdGNoWWVhcihkYXRlLmdldEZ1bGxZZWFyKCkpOwogICAgfSwKICAgIC8vIDDmnKrkuIrkvKAgMeS7peS4igogICAgc3dpdGNoWWVhcih5ZWFyKSB7CiAgICAgIHRoaXMucmVxdWVzdFVwbG9hZCgpOwogICAgICAvLyBhcGlGaWxlcyh7CiAgICAgIC8vICAgeWVhcjogeWVhcgogICAgICAvLyB9KQogICAgICAvLyAgIC50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZygi6K+35rGC5paH5Lu25YiX6KGo5oiQ5YqfLi4uIik7CiAgICAgIC8vICAgICAvLyDmuIXnqbrljp/mnKznmoTooajmoLzmlbDmja4KICAgICAgLy8gICAgIHRoaXMuZmlsZXMuc3BsaWNlKDAsIHRoaXMuZmlsZXMubGVuZ3RoKTsKICAgICAgLy8gICAgIC8vIOaPkuWFpeivt+axguWbnuadpeeahAogICAgICAvLyAgICAgcmVzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgIC8vICAgICAgIHRoaXMuZmlsZXMucHVzaChlbGVtZW50KTsKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKGVyciA9PiB7CiAgICAgIC8vICAgICB0aGlzLiRhbGVydChlcnIsICLor7fmsYLlt7LkuIrkvKDnmoTmlofku7bliJfooajlpLHotKUiLCB7CiAgICAgIC8vICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAib2siCiAgICAgIC8vICAgICB9KTsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCLor7fmsYLmlofku7bliJfooajlpLHotKUiKTsKICAgICAgLy8gICB9KTsKICAgICAgY29uc29sZS5sb2coIumAieaLqeW5tOS7vToiICsgeWVhcik7CiAgICAgIC8vCiAgICB9LAogICAgLy8g5o6l5Y+jMSDkuIrkvKDmlofku7bku7YKICAgIHN1Ym1pdFVwbG9hZCgpIHsKICAgICAgdGhpcy4kcmVmcy51cGxvYWQuc3VibWl0KCk7CiAgICB9CiAgICAvLyBzdWNjZXNzKCkgewogICAgLy8gICBjb25zb2xlLmxvZygi5LiK5Lyg5pWw5o2u5oiQ5YqfISIpOwogICAgLy8gfSwKICAgIC8vIGVycm9yKCkgewogICAgLy8gICB0aGlzLiRtZXNzYWdlKCLkuIrkvKDmlbDmja7lpLHotKUuLi4iKTsKICAgIC8vIH0KICB9Cn07Cg=="},{"version":3,"sources":["Data.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Data.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-row>\n      <el-col>\n             <el-select @change=\"openCollege\" v-model=\"selectCollege\"  placeholder=\"打开可视化界面\">\n                <el-option v-for=\"college in storeState.colleges\" :key=\"college\" :label=\"college\" :value=\"college\"></el-option>\n              </el-select>\n  <!-- <router-link :to=\"{name:'college'}\"> <el-button @click=\"truncateFiles\">跳转到可视化界面</el-button>  </router-link> -->\n         <el-button @click=\"truncateFiles\">一键清空表</el-button>\n      </el-col>\n    </el-row>\n    <!--  -->\n    <el-row :gutter=\"40\">\n      <!-- 上传接口1  -->\n      <el-col :span=\"10\"  v-if=\"false\">\n        <el-card>\n          <div slot=\"header\">\n            <span>综合素质数据文件管理</span>\n\n            <!-- 设置在右边 -->\n            <el-date-picker\n              style=\"float:right;\"\n              @change=\"changeYear\"\n              v-model=\"year\"\n              type=\"year\"\n              placeholder=\"选择学年度\"\n            ></el-date-picker>\n            <div style=\"float:right;\">选择指定年度的数据</div>\n          </div>\n\n          <div>数据文件管理，每个年度对应三个年级,每个年级2个学期，共6个数据文件</div>\n          <!-- 显示全部的表格 -->\n          <el-table :data=\"files\" :row-class-name=\"fileStateClassName\">\n            <!-- 指定列 -->\n            <el-table-column label=\"学院\" prop=\"college\"></el-table-column>\n            <el-table-column label=\"年度\" prop=\"year\"></el-table-column>\n            <el-table-column :formatter=\"formatGrade\" label=\"年级\" prop=\"grade\"></el-table-column>\n            <el-table-column :formatter=\"formatTerm\" label=\"学期\" prop=\"term\"></el-table-column>\n            <el-table-column label=\"记录数\" prop=\"count\"></el-table-column>\n            <el-table-column :formatter=\"formatState\" label=\"状态\" prop=\"state\"></el-table-column>\n            <!-- 设置每一行都有的操作 -->\n            <el-table-column label=\"操作\">\n              <!-- 通过scope.row可以获取到表格的某行数据 -->\n              <template slot-scope=\"scope\">\n                <el-upload\n                  :on-success=\"uploadOk\"\n                  :on-error=\"uploadNotOk\"\n                  action=\"/api/data/upload\"\n                  :data=\"getUploadPostData(scope.row)\"\n                  :show-file-list=\"false\"\n                >\n                  <el-button type=\"text\">上传数据</el-button>\n                </el-upload>\n                <el-button\n                  v-if=\"scope.row.state==1\"\n                  type=\"text\"\n                  @click=\"parseFile(scope.row)\"\n                >解析数据到数据库</el-button>\n                <el-button type=\"text\" @click=\"deleteFile(scope.row)\">删除记录</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n      </el-col>\n\n<!-- 上传接口2 -->\n      <el-col :span=\"14\" :xs=\"20\">      \n        <el-card>\n          <div slot=\"header\">\n            <span>已经上传的数据</span>\n            <div style=\"float:right\">\n              <div style=\"display:inline;padding-right:20px;\" >用户名:{{storeState.login.username}}</div>\n              <el-button type=\"success\" @click=\"qiandao\">每日签到领金币</el-button>\n              <!-- 修改密码 -->\n              <el-button type=\"warning\" @click=\"dialogVisible = true\">修改登录密码</el-button>\n              <el-dialog title=\"提示\"\n                        :visible.sync=\"dialogVisible\"\n                        width=\"30%\"\n                        :before-close=\"handleClose\">\n                          <el-form size=\"medium\">\n                        <el-form-item  label=\"原密码\" prop=\"password1\">\n                    <el-input placeholder=\"原密码\" v-model=\"reg.password1\" show-password> </el-input>\n                    </el-form-item>\n                    <el-form-item  label=\"新密码\" prop=\"password2\">\n                    <el-input placeholder=\"密码\" v-model=\"reg.password2\" show-password> </el-input>\n                </el-form-item>\n                <el-form-item   label=\"确认新密码\" prop=\"password3\">\n                    <el-input placeholder=\"密码\" v-model=\"reg.password3\" show-password> </el-input>\n                </el-form-item>\n                          </el-form>\n\n                        <span slot=\"footer\" class=\"dialog-footer\">\n                        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"changgg\">确 定</el-button>\n                        </span>\n                        </el-dialog>\n              <el-button type=\"danger\" @click=\"logout\">退出登录</el-button>\n               </div>\n            \n            \n          </div>\n          <span>上传新数据</span>\n\n          <el-row>\n                <el-col :span=\"4\">\n              <el-select v-model=\"upload.college\" placeholder=\"选择学院\">\n                <el-option v-for=\"college in storeState.colleges\" :key=\"college\" :label=\"college\" :value=\"college\"></el-option>\n              </el-select>\n            </el-col>\n            <!-- 选择年度 -->\n            <el-col :span=\"4\">\n              \n              <el-date-picker v-model=\"upload.year\" type=\"year\" placeholder=\"选择年度\"></el-date-picker>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-select v-model=\"upload.grade\" type=\"year\" placeholder=\"选择年级\">\n                <el-option\n                  :label=\"year.label\"\n                  :value=\"year.value\"\n                  v-for=\"year in uploadYears\"\n                  :key=\"year.value\"\n                ></el-option>\n              </el-select>\n            </el-col>\n            <el-col :span=\"4\">\n              <el-select v-model=\"upload.term\">\n                <el-option label=\"第一学期\" value=\"term1\"></el-option>\n                <el-option label=\"第二学期\" value=\"term2\"></el-option>\n              </el-select>\n            </el-col>\n            <el-col :span=\"12\">\n              <el-upload\n                :limit=\"1\"\n                :multiple=\"false\"\n                ref=\"uploadNew\"\n                :auto-upload=\"false\"\n                :data=\"uploadData\"\n                action=\"/api/data/upload\"\n                :on-success=\"uploadOk\"\n                :on-error=\"uploadNotOk\"\n                :on-change=\"uploadChange\"\n                \n              >\n                <el-button slot=\"trigger\">选择对应的Excel文件</el-button>\n                <el-button @click=\"submitUploadNew\">上传数据</el-button>\n              </el-upload>\n            </el-col>\n          </el-row>\n\n          <el-table :data=\"uploaded\" :row-class-name=\"fileStateClassName\">\n            <el-table-column label=\"学院\" prop=\"college\"></el-table-column>\n            <el-table-column label=\"年度\" prop=\"year\"></el-table-column>\n            <el-table-column :formatter=\"formatGrade\" label=\"年级\" prop=\"grade\"></el-table-column>\n            <el-table-column  :formatter=\"formatTerm\" label=\"学期\" prop=\"term\"></el-table-column>\n            <el-table-column  :formatter=\"formatState\" label=\"状态\" prop=\"state\"></el-table-column>\n            <el-table-column label=\"操作\">\n              <template slot-scope=\"scope\">\n                <el-button @click=\"deleteFile(scope.row)\">删除数据</el-button>\n                <el-button v-if=\"scope.row.state==1\" @click=\"parseFile(scope.row)\">解析数据</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n\n    \n\n\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport {\n  apiParse,\n  apiTruncate,\n  apiFiles,\n  apiDelete,\n  apiUploaded\n} from \"../api/dataApi.js\";\n\nimport { Loading } from \"element-ui\";\nimport { arrayFill ,errorDialog } from \"../utils/tools.js\";\nimport {apiLogout,apiUserInfo,apiUserchange} from '../api/api.js'\nimport {store} from '../store.js'\nimport { college } from '../api/testdata';\n\nexport default {\n  // 组件名称,在调试时有用\n  name: \"datamanage\",\n\n\n  data() {\n    return {\n      selectCollege:\"\",\n      \n      reg:{\n         password1:\"\",\n         password2:\"\",\n         password3:\"\",\n      },\n      dialogVisible: false,\n      storeState:store.state,\n      // 接口2的 用来和选择框\n      upload: {\n        // 这个选择后变成Date对象\n        year: \"\",\n        grade: \"\",\n        term: \"\",\n        college:\"大数据与人工智能学院\"\n      },\n      // 上传文件时附带的数据,点击上传后根据upload对象里的各个值设置uploadData的内容再提交\n      uploadData: {},\n      // 已上传的数据列表\n\n      uploaded: [],\n      // 接口1\n      // 当前选择的日期，默认选择2019年度的\n      year: new Date(2019, 11, 11),\n      // 没数据时显示的测试\n      files: [\n        {\n          college: \"测试\",\n          year: \"2018\"\n        }\n      ]\n      \n    };\n  },\n\n  // 组件created时请求2019的数据\n  created() {\n           console.log(\"组件创建...\")\n    // 请求用户信息\n    apiUserInfo().then(res=>{\n      console.log(\"获取用户登录信息...\")\n      console.log(res)\n    //  设置用户信息\n    console.log(\"设置用户名:\"+res.data.username)\n    store.setUserName(res.data.username);\n    }).catch(err=>{\n      console.log(\"获取用户信息出错:\")\n      console.log(err)\n    })\n    // 请求两个接口的数据\n    this.switchYear(2019);\n    this.requestUpload();\n \n  },\n  computed: {\n    // 选择某个年度后，学期也是确定的,2017年度只有三个学期 17级16级15级\n    uploadYears() {\n      if (this.upload.year === \"\") return [];\n      console.log(this.upload.year + typeof this.upload.year);\n      let year = this.upload.year.getFullYear();\n      let result = [];\n      for (let j = year; j > year - 3; j -= 1) {\n        result.push({\n          label: j + \"级\",\n          value: j + \"\"\n        });\n      }\n\n      return result;\n    }\n  },\n  methods: {\n    openCollege(value)\n    {\n      console.log(\"打开学院:\",value)\n      this.$router.push({\n        name:\"college\",\n        params:{\n          collegeid:value\n        }\n        \n\n      })\n    },\n    qiandao(){\n      this.$message({\n        message:\"签到成功,金币+10\",\n        type:\"warning\"\n      })\n    },\n    \n    changgg(){\n      if(this.reg.password2!=this.reg.password3){\n        this.$message({\n          showClose: true,\n          message: '密码不一致',\n          type: 'error'\n        });\n        return\n      }\n      this.dialogVisible=false\n      console.log(\"调用监听修改密码\")\n      apiUserchange({\n          username:this.storeState.login.username,\n          old_password:this.reg.password1,\n          password:this.reg.password2,\n          password2:this.reg.password3,\n      }).then(res=>{\n        \n        console.log(\"请求成功..\")\n        console.log(res)\n        if(res.code==0)\n        {\n        this.$message({\n          showClose: true,\n          message: '密码修改成功,跳转到登录界面',\n          type: 'success'\n        });\n        this.$router.push({\n          name:'login'\n        })\n        }\n        else\n        this.$message({\n          showClose: true,\n          message: '密码失败:'+res.msg,\n          type: 'error'\n        });\n      }).catch(err=>{\n        console.log(\"请求失败.\")\n      })\n    },\n      handleClose(done) {\n        this.$confirm('确认关闭？')\n          .then(_ => {\n            done();\n          })\n          .catch(_ => {});\n      }\n    ,\n    logout(){\n      apiLogout().then(res=>{\n        if(res.code==0){\n        this.$message({\n          message:\"登出成功!\"\n        })\n        this.$router.push({\n          name:'login'\n\n        })\n        }\n        else{\n            errorDialog(this,res.msg)\n        }\n      }).catch(err=>{})\n\n    },\n    // 接口1 提交数据\n    submitUploadNew() {\n      console.log(\"上传数据...\");\n      if(this.upload.year==\"\"){\n        this.$message(\"年度没有选择!!\")\n        return\n      }\n      // 设置附加参数\n      this.uploadData[\"year\"] = this.upload.year.getFullYear();\n      this.uploadData[\"grade\"] = this.upload.grade;\n      this.uploadData[\"term\"] = this.upload.term;\n      this.uploadData[\"college\"] = this.upload.college;\n      this.$refs.uploadNew.submit();\n    },\n    // 获取已上传数据\n    requestUpload() {\n      apiUploaded()\n        .then(res => {\n          console.log(\"获取已上传的数据:\");\n          console.log(res);\n          if(res.code==0)\n          arrayFill(this.uploaded, res.data);\n          else\n          this.$alert(res.data,\"失败\",{\n            confirmButtonText:\"确定\"\n          })\n        })\n        .catch(err => {\n          console.log(\"获取已上传的数据失败\");\n        });\n    },\n    // 格式化年级输出，2017只输出 17级这样的\n    formatGrade(row, column, cellValue, index) {\n      if(!cellValue)return \"null\"\n      if (cellValue.length == 4) return cellValue.substring(2, 4) + \"级\";\n      else return cellValue;\n    },\n    // 格式化学期输出\n    formatTerm(row,column,cellValue,index){\n      if(cellValue==\"term1\")return \"第一学期\"\n      else if(cellValue==\"term2\")return \"第二学期\"\n      else\n      return cellValue\n    },\n    // 格式化状态码,将数字转换成文字\n    formatState(row,column,cellValue,index){\n        if(cellValue==0)\n        return \"未上传\"\n        else if(cellValue==1)\n        return \"未解析\"\n        else if(cellValue==2)\n        return \"解析完成\"\n    },\n    // 清空表，测试使用\n    truncateFiles() {\n      apiTruncate()\n        .then(res => {\n          console.log(\"清空表成功..\");\n          this.switchYear(this.year.getFullYear());\n        })\n        .catch(err => {\n          console.log(\"清空表失败..\");\n        });\n    },\n    // 清空数据，清空某个文件的数据，并删除文件\n    deleteFile(param) {\n      let postparam = {\n        // 学年\n        year: param.year,\n        // 年级\n        grade: param.grade,\n        // 学期\n        term: param.term,\n        college:param.college\n      };\n       Loading.service({ text: \"删除数据文件和数据库里的记录....\", fullscreen: true });\n      apiDelete(postparam)\n        .then(res => {\n              Loading.service({ fullscreen: true }).close();\n          console.log(\"ffff\")\n          console.log(res)\n         \n          if(res.code==0){\n          this.$message({ type: \"success\", message: \"清空数据成功:\"+res.msg });\n          // 删除成功刷新数据\n          this.switchYear(this.year.getFullYear());\n          }\n          else\n          {\n            this.$alert(res.msg, \"删除数据失败\", {\n            confirmButtonText: \"确定\"\n          });\n          }\n        })\n        .catch(err => {\n              Loading.service({ fullscreen: true }).close();\n          console.log(err)\n          this.$alert(err.data, \"服务器响应失败,清空数据失败\", {\n            confirmButtonText: \"确定\"\n          });\n        });\n    },\n    // 解析文件,post解析数据的路由\n    parseFile(param) {\n      console.log(\"解析数据:\");\n      console.log(param);\n      // 时间较长，显示全屏进度条\n      Loading.service({ text: \"解析数据到数据库中....\", fullscreen: true });\n      let postparam = {\n        // 学年\n        year: param.year,\n        // 年级\n        grade: param.grade,\n        // 学期\n        term: param.term,\n        college:param.college\n      };\n      apiParse(postparam)\n        .then(res => {\n          // 请求完成，关闭进度条\n          Loading.service({ fullscreen: true }).close();\n          console.log(res);\n          // 返回200,再判断错误无码\n          if (res.code != 0) {\n            this.$alert(res.msg, \"服务器响应上传失败\", {\n              confirmButtonText: \"确定\"\n            });\n          } else {\n            this.$message({ type: \"success\", message: \"解析成功\" });\n          }\n          this.switchYear(this.year.getFullYear());\n        })\n        .catch(err => {\n            this.$alert( \"捕捉到异常:\"+err,\"解析错误\", {\n              confirmButtonText: \"确定\"\n            });\n          Loading.service({ fullscreen: true }).close();\n        });\n    },\n    \n    // 上传成功回调\n    //提示消息\n    uploadOk(response, file, fileList) {\n      if (response.code != 0) {\n        this.$alert(response.msg, \"服务器响应上传失败\", {\n          confirmButtonText: \"确定\"\n        });\n      } else {\n        this.$message({\n          type: \"success\",\n          message: \"上传成功\"\n        });\n      }\n      this.switchYear(this.year.getFullYear());\n      this.$refs.uploadNew.clearFiles();\n    },\n    // 上传失败回调\n    uploadNotOk(err, file, fileList) {\n      console.log(\"上传文件不成功...\");\n      console.log(err);\n      this.$alert(err, \"上传失败\", {\n        confirmButtonText: \"确定\"\n      });\n      this.$refs.uploadNew.clearFiles();\n    },\n    // 文件状态改变添加文件，上传成功，上传失败都会调用，这里设置个逻辑，上传成功后尝试解析文件名，获取出年度年级数据\n    uploadChange(file,fileList){\n      console.log(\"文件状态改变:\")\n      console.log(file)\n      console.log(fileList)\n      // 因为都会触发，如果长度是1就是，添加的，上传的fileList变成0\n      if(fileList.length==1)\n      {\n        let name = fileList[0].name\n        console.log(\"添加文件名:\"+name)\n        // 正则查找文件名里的数据\n        let grade_pattern =/(\\d+)级/g\n        let term_pattern= /第(.)学期/g\n        let year_pattern=/(\\d{4})-\\d{4}/g\n        let grade=grade_pattern.exec(name)\n        let term = term_pattern.exec(name)\n        let year = year_pattern.exec(name)\n        console.log(\"尝试在文件名里查找参数:\"+grade)\n        console.log(term)\n        console.log(year)\n        // 如果三个都查找到就切换\n        if(grade.length==2&&term.length==2&&year.length==2)\n        {\n          term = term[1]\n          if(term==\"一\")term=\"term1\"\n          else if(term==\"二\")term=\"term2\"\n          grade=grade[1]\n          year = year[1]\n          this.$message({\n            type:\"success\",\n            message:`文件名里获取年度等数据成功,年度:${year} 年级:${grade} 学期:${term}`\n          })\n          this.upload.grade=grade\n          this.upload.term = term\n          this.upload.year = new Date(year,1,1)\n        }\n        else\n        {\n          this.$message({\n            type:\"error\",\n            message:\"文件名里获取年度等数据失败，请手动选择\"\n          })\n        }\n\n      }\n    },\n    // 接口1-------------------\n    // 获取post时顺便上传上去的数据，上传，el-upload用到，这里提交过去的是表单形式的\n    getUploadPostData(row) {\n      return {\n        year: row.year,\n        grade: row.grade,\n        term: row.term\n      };\n    },\n    // 行的样式，根据状态码的不同显示不同的背景颜色\n    fileStateClassName(row, rowIndex) {\n      if (row.row.state == 0) return \"file-no-upload\";\n      else if (row.row.state == 1) {\n        return \"file-ok\";\n      }\n    },\n    // 改变选择年度时,重新请求数据\n    changeYear(date) {\n      this.switchYear(date.getFullYear());\n    },\n    // 0未上传 1以上\n    switchYear(year) {\n      this.requestUpload();\n      // apiFiles({\n      //   year: year\n      // })\n      //   .then(res => {\n      //     console.log(\"请求文件列表成功...\");\n      //     // 清空原本的表格数据\n      //     this.files.splice(0, this.files.length);\n      //     // 插入请求回来的\n      //     res.forEach(element => {\n      //       this.files.push(element);\n      //     });\n      //   })\n      //   .catch(err => {\n      //     this.$alert(err, \"请求已上传的文件列表失败\", {\n      //       confirmButtonText: \"ok\"\n      //     });\n      //     console.log(\"请求文件列表失败\");\n      //   });\n      console.log(\"选择年份:\" + year);\n      //\n    },\n    // 接口1 上传文件件\n    submitUpload() {\n      this.$refs.upload.submit();\n    }\n    // success() {\n    //   console.log(\"上传数据成功!\");\n    // },\n    // error() {\n    //   this.$message(\"上传数据失败...\");\n    // }\n  }\n};\n</script>\n\n\n<style >\n/* 没上传文件的表格颜色 */\n.el-table .file-no-upload {\n  background: oldlace;\n}\n.el-table .file-ok {\n  background: #f0f9eb;\n}\n</style>"]}]}